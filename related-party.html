<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>关联交易排查 - 工程监督平台</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <link href="related-party.css" rel="stylesheet">
</head>
<body>

    <!-- 页面标题 -->
    <div class="related-party-page-header">
        <div class="header-content">
            <h1 class="related-party-page-title" data-i18n="related_party.page_title">关联交易排查</h1>
            <div class="header-actions">
                <a href="index.html" class="btn btn-outline-primary back-btn">
                    <i class="bi bi-arrow-left me-2"></i>
                    <span data-i18n="related_party.back_to_home">返回首页</span>
                </a>
            </div>
        </div>
    </div>

    <!-- 主内容区 -->
    <div class="related-party-container">
        <div class="row h-100">
            <!-- 左侧规则开关区域 -->
            <div class="col-md-3 col-lg-2 related-party-sidebar">
                <div class="rules-panel">
                    <h5 class="rules-title" data-i18n="related_party.rules_title">检测规则</h5>
                    <div class="rules-list">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="avoid_bidding" id="rule1" checked>
                            <label class="form-check-label" for="rule1" data-i18n="related_party.rule_avoid_bidding">
                                规避公开招标
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="split_procurement" id="rule2" checked>
                            <label class="form-check-label" for="rule2" data-i18n="related_party.rule_split_procurement">
                                拆分采购
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="brand_specification" id="rule3" checked>
                            <label class="form-check-label" for="rule3" data-i18n="related_party.rule_brand_specification">
                                指定品牌/参数指向
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="expert_avoidance" id="rule4" checked>
                            <label class="form-check-label" for="rule4" data-i18n="related_party.rule_expert_avoidance">
                                评标专家回避不当
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="related_detection" id="rule5" checked>
                            <label class="form-check-label" for="rule5" data-i18n="related_party.rule_related_detection">
                                关联关系检测
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧内容区 -->
            <div class="col-md-9 col-lg-10 related-party-content">
                <div class="related-party-main">

                    <!-- 统计卡片区 -->
                    <div class="stats-cards">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon">
                                        <i class="bi bi-search"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-number" id="total-projects">156</div>
                                        <div class="stat-label" data-i18n="related_party.total_projects">已检测项目数</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon stat-icon-compliant">
                                        <i class="bi bi-check-circle"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-number stat-number-compliant" id="compliant-projects">128</div>
                                        <div class="stat-label" data-i18n="related_party.compliant_projects">合规项目数</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon stat-icon-risk">
                                        <i class="bi bi-exclamation-triangle"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-number stat-number-risk" id="risk-projects">28</div>
                                        <div class="stat-label" data-i18n="related_party.risk_projects">风险项目数</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 项目列表表格 -->
                    <div class="projects-table-card">
                        <div class="card-header">
                            <h5 class="card-title" data-i18n="related_party.projects_list">项目列表</h5>
                            <div class="table-actions">
                                <button class="btn btn-outline-primary btn-sm" id="export-csv" data-i18n="related_party.export_csv">导出结果 CSV</button>
                                <button class="btn btn-primary btn-sm" id="generate-pdf" data-i18n="related_party.generate_pdf">生成案件包 PDF</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="projects-table">
                                    <thead>
                                        <tr>
                                            <th data-i18n="related_party.project_name">项目名称</th>
                                            <th data-i18n="related_party.risk_level">风险等级</th>
                                            <th data-i18n="related_party.hit_rules">命中规则</th>
                                            <th data-i18n="related_party.actions">操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="projects-table-body">
                                        <!-- 动态生成项目数据 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- MaxKB 浮窗 -->
    <script async defer src="http://62.234.162.112:6002/chat/api/embed?protocol=http&host=62.234.162.112:6002&token=ef85a1c2cc251df3"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- 自定义 JS -->
    <script src="app.js"></script>
</body>
</html>
