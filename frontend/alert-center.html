<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>告警中心 - AI项目诚信监管平台</title>
    <link rel="stylesheet" href="alert-center.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- 顶部导航 -->
    <header class="header">
        <div class="header-container">
            <h1 class="page-title">
                告警中心
            </h1>
            <div class="header-actions">
                <button class="btn btn-outline-secondary" onclick="exportData('csv')">
                    <i class="fas fa-download"></i>
                    导出 CSV
                </button>
                <button class="btn btn-outline-secondary" onclick="exportData('pdf')">
                    <i class="fas fa-file-pdf"></i>
                    导出 PDF
                </button>
                <button class="btn btn-outline-primary" onclick="goHome()">
                    <i class="fas fa-home"></i>
                    返回首页
                </button>
            </div>
        </div>
    </header>

    <!-- 主内容区域 -->
    <main class="main-content">
        <div class="content-container">
            <!-- KPI 卡片区域 -->
            <section class="kpi-section">
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-icon total">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-number" id="totalAlerts">156</div>
                            <div class="kpi-label">告警总数</div>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon today">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-number" id="todayAlerts">12</div>
                            <div class="kpi-label">本日新增</div>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon unresolved">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-number" id="unresolvedAlerts">28</div>
                            <div class="kpi-label">未处置数</div>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-icon high-risk">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="kpi-content">
                            <div class="kpi-number" id="highRiskRate">35%</div>
                            <div class="kpi-label">高风险占比</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 主区布局 -->
            <section class="main-grid">
                <!-- 左侧：告警收件箱 -->
                <div class="table-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-inbox"></i>
                            告警收件箱
                        </h2>
                        <div class="batch-actions" id="batchActions" style="display: none;">
                            <button class="btn btn-sm btn-outline-primary" onclick="batchAction('mark')">
                                <i class="fas fa-check"></i>
                                批量标记
                            </button>
                            <button class="btn btn-sm btn-outline-primary" onclick="batchAction('assign')">
                                <i class="fas fa-user-plus"></i>
                                批量分派
                            </button>
                            <button class="btn btn-sm btn-outline-primary" onclick="batchAction('merge')">
                                <i class="fas fa-compress"></i>
                                批量合并
                            </button>
                        </div>
                    </div>
                    
                    <!-- 筛选区 -->
                    <div class="filter-section">
                        <div class="filter-row">
                            <div class="filter-group">
                                <label class="filter-label">严重度：</label>
                                <select id="severityFilter" class="filter-select">
                                    <option value="">全部</option>
                                    <option value="high">高风险</option>
                                    <option value="medium">中风险</option>
                                    <option value="low">低风险</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">来源模块：</label>
                                <select id="moduleFilter" class="filter-select">
                                    <option value="">全部</option>
                                    <option value="supplier">供应商画像</option>
                                    <option value="design">设计追溯</option>
                                    <option value="compliance">合规看板</option>
                                    <option value="kinship">关系梳理</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">项目：</label>
                                <select id="projectFilter" class="filter-select">
                                    <option value="">全部</option>
                                    <option value="项目A">项目A</option>
                                    <option value="项目B">项目B</option>
                                    <option value="项目C">项目C</option>
                                    <option value="项目D">项目D</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter-row">
                            <div class="filter-group">
                                <label class="filter-label">责任人：</label>
                                <select id="ownerFilter" class="filter-select">
                                    <option value="">全部</option>
                                    <option value="张三">张三</option>
                                    <option value="李四">李四</option>
                                    <option value="王五">王五</option>
                                    <option value="赵六">赵六</option>
                                </select>
                            </div>
                            <div class="filter-group search-group">
                                <label class="filter-label">关键字：</label>
                                <input type="text" id="keywordSearch" class="search-input" placeholder="搜索告警描述...">
                                <i class="fas fa-search search-icon"></i>
                            </div>
                        </div>
                    </div>

                    <!-- 表格区域 -->
                    <div class="table-container">
                        <table class="data-table" id="alertsTable">
                            <thead>
                                <tr>
                                    <th>
                                        <input type="checkbox" id="selectAll" class="table-checkbox">
                                    </th>
                                    <th>严重度</th>
                                    <th>来源模块</th>
                                    <th>项目/标段</th>
                                    <th>责任人</th>
                                    <th>时间</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="alertsTableBody">
                                <!-- 数据将通过JavaScript动态填充 -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 右侧：统计与趋势区 -->
                <div class="chart-section">
                    <!-- 趋势图 -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <i class="fas fa-chart-line"></i>
                                告警趋势
                            </h3>
                            <div class="chart-tabs">
                                <button class="tab-btn active" onclick="switchTrend('daily')">日</button>
                                <button class="tab-btn" onclick="switchTrend('weekly')">周</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-placeholder">
                                <i class="fas fa-chart-line"></i>
                                <p>告警数量趋势图</p>
                                <small>显示按日/周变化的告警数量</small>
                            </div>
                        </div>
                    </div>

                    <!-- 分布图 -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <i class="fas fa-chart-pie"></i>
                                告警分布
                            </h3>
                        </div>
                        <div class="chart-container">
                            <div class="distribution-grid">
                                <div class="distribution-item">
                                    <div class="dist-title">按来源模块</div>
                                    <div class="dist-chart">
                                        <div class="dist-bar">
                                            <div class="dist-fill" style="width: 40%"></div>
                                            <span class="dist-label">供应商画像</span>
                                            <span class="dist-value">40%</span>
                                        </div>
                                        <div class="dist-bar">
                                            <div class="dist-fill" style="width: 30%"></div>
                                            <span class="dist-label">设计追溯</span>
                                            <span class="dist-value">30%</span>
                                        </div>
                                        <div class="dist-bar">
                                            <div class="dist-fill" style="width: 20%"></div>
                                            <span class="dist-label">合规看板</span>
                                            <span class="dist-value">20%</span>
                                        </div>
                                        <div class="dist-bar">
                                            <div class="dist-fill" style="width: 10%"></div>
                                            <span class="dist-label">关系梳理</span>
                                            <span class="dist-value">10%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="distribution-item">
                                    <div class="dist-title">按严重度</div>
                                    <div class="dist-chart">
                                        <div class="dist-bar">
                                            <div class="dist-fill high" style="width: 35%"></div>
                                            <span class="dist-label">高风险</span>
                                            <span class="dist-value">35%</span>
                                        </div>
                                        <div class="dist-bar">
                                            <div class="dist-fill medium" style="width: 45%"></div>
                                            <span class="dist-label">中风险</span>
                                            <span class="dist-value">45%</span>
                                        </div>
                                        <div class="dist-bar">
                                            <div class="dist-fill low" style="width: 20%"></div>
                                            <span class="dist-label">低风险</span>
                                            <span class="dist-value">20%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 责任人排行榜 -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <i class="fas fa-trophy"></i>
                                责任人待办排行
                            </h3>
                        </div>
                        <div class="chart-container">
                            <div class="ranking-list" id="rankingList">
                                <!-- 数据将通过JavaScript动态填充 -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- 详情抽屉 -->
    <div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
    <div class="drawer" id="detailDrawer">
        <div class="drawer-header">
            <h3 class="drawer-title">告警详情</h3>
            <button class="drawer-close" onclick="closeDrawer()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="drawer-body" id="drawerContent">
            <!-- 详情内容将通过JavaScript动态填充 -->
        </div>
    </div>

    <!-- Toast 提示 -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="toast-icon"></i>
            <span class="toast-message"></span>
        </div>
    </div>

    <script src="alert-center.js"></script>
</body>
</html>
